{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "device_type_attribute_map",
  "description": "Device type and the attribute names mapping for pub/sub command purpose",
  "type": "object",
  "properties": {
    "_id": {
      "description": "Unique mongodb id for a document. Auto generated",
      "type": "string",
      "index": {
        "$ref": "/indexes/_id"
      }
    },
    "attribute_name": {
      "description": "Attribute name used accross vriot. For Ex. ON_OFF, SET_COLOR, SET_BRIGHTNESS",
      "type": "string",
      "index": {
        "$ref": "/indexes/attribute_name"
      }
    },
    "device_attribute_name": {
      "description": "Device type and attribute name to be sent to the device over mqtt or any pub/sub. For Ex. <device_type> <attribute> LIGHT ON_OFF => LIGHT LIGHT_ON_OFF",
      "type": "object",
      "properties": {
        "<device_type>": {
          "description": "Type of device. For Ex. LIGHT, SWITCH",
          "type": "object",
          "properties": {
            "<device_attribute>": {
              "description": "The device attribute map. For Ex. ON_OFF => LIGHT_ON_OFF "
            }
          }
        }
      }
    },
    "reverse_attribute_name": {
      "description": "Reverse conversion for attribute name used accross vriot. For Ex. LIGHT_ON_OFF => ON_OFF, LIGHT_MOVECOLOR => SET_COLOR",
      "type": "string",
      "index": {
        "$ref": "/indexes/reverse_attribute_name"
      }
    },
    "reverse_device_attribute_name": {
      "description": "Reverse conversion for device type and attribute name received from the device over mqtt or any pub/sub. For Ex. <device_type> <attribute> LIGHT LIGHT_ON_OFF => LIGHT ON_OFF",
      "type": "object",
      "properties": {
        "<device_type>": {
          "description": "Type of device. For Ex. LIGHT, SWITCH",
          "type": "object",
          "properties": {
            "<device_attribute>": {
              "description": "The device attribute map. For Ex. LIGHT_ON_OFF => ON_OFF "
            }
          }
        }
      }
    },
    "is_deleted": {
      "description": "Attribute is deleted or not",
      "type": "boolean",
      "default": false
    },
    "created_on": {
      "description": "Document created time",
      "type": "string",
      "default": "Datetime object from python"
    },
    "updated_on": {
      "description": "Document updated time",
      "type": "string",
      "default": "Datetime object from python"
    }
  },
  "required": [
    "attribute_name",
    "device_attribute_name",
    "reverse_attribute_name",
    "reverse_device_attribute_name"
  ],
  "indexes": {
    "_id": {
      "description": "Mongo DB default index on document",
      "type": "string"
    },
    "attribute_name": {
      "description": "Index on attribute_name field for faster search",
      "type": "string"
    },
    "reverse_attribute_name": {
      "description": "Index on reverse_attribute_name field for faster search",
      "type": "string"
    }
  }
}